<template>
  <div class="app">
    <div class="container">
      <!-- Ê†áÈ¢òÂå∫Âüü -->
      <div class="header" v-if="currentStep === 0">
        <!-- ÂèØÁà±ÁöÑÂ∞èÁãóÈÅõÁãóÂä®Áîª -->
        <div class="dog-walking-animation">
          <svg class="dog-svg" viewBox="0 0 500 300" xmlns="http://www.w3.org/2000/svg">
            <!-- Ê∏êÂèòÂÆö‰πâ -->
            <defs>
              <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#87CEEB;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#E0F6FF;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="grassGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#90EE90;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#32CD32;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="husbandGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#FFB6C1;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#FF69B4;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="wifeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#DDA0DD;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#9370DB;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="dogGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#F4A460;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#D2691E;stop-opacity:1" />
              </linearGradient>
            </defs>
            
            <!-- ËÉåÊôØ -->
            <rect width="500" height="300" fill="url(#skyGradient)"/>
            <rect x="0" y="200" width="500" height="100" fill="url(#grassGradient)"/>
            
            <!-- ‰∫ëÊúµ -->
            <g class="clouds">
              <g class="cloud" transform="translate(80, 50)">
                <ellipse cx="0" cy="0" rx="30" ry="18" fill="white" opacity="0.9"/>
                <ellipse cx="25" cy="-5" rx="20" ry="15" fill="white" opacity="0.9"/>
                <ellipse cx="-20" cy="-3" rx="18" ry="12" fill="white" opacity="0.9"/>
              </g>
              <g class="cloud" transform="translate(380, 40)">
                <ellipse cx="0" cy="0" rx="25" ry="15" fill="white" opacity="0.8"/>
                <ellipse cx="20" cy="-3" rx="18" ry="12" fill="white" opacity="0.8"/>
                <ellipse cx="-18" cy="-2" rx="15" ry="10" fill="white" opacity="0.8"/>
              </g>
              <g class="cloud" transform="translate(250, 35)">
                <ellipse cx="0" cy="0" rx="22" ry="14" fill="white" opacity="0.7"/>
                <ellipse cx="18" cy="-4" rx="16" ry="11" fill="white" opacity="0.7"/>
                <ellipse cx="-16" cy="-1" rx="14" ry="9" fill="white" opacity="0.7"/>
              </g>
            </g>
            
            <!-- ËÄÅÂÖ¨ -->
            <g class="husband" transform="translate(150, 180)">
              <!-- Â§¥ÈÉ® -->
              <circle cx="0" cy="0" r="18" fill="url(#husbandGradient)"/>
              <!-- Â§¥Âèë -->
              <path d="M -15 -18 Q 0 -30 15 -18" fill="url(#husbandGradient)"/>
              <!-- Ë∫´‰Ωì -->
              <rect x="-16" y="18" width="32" height="40" fill="url(#husbandGradient)" rx="16"/>
              <!-- ÊâãËáÇ -->
              <rect x="-25" y="22" width="10" height="28" fill="url(#husbandGradient)" rx="5" transform="rotate(-15, -25, 22)"/>
              <!-- ËÖø -->
              <rect x="-10" y="58" width="8" height="22" fill="url(#husbandGradient)" rx="4"/>
              <rect x="2" y="58" width="8" height="22" fill="url(#husbandGradient)" rx="4"/>
              <!-- ÁúºÁùõ -->
              <circle cx="-6" cy="-4" r="2.5" fill="#333"/>
              <circle cx="6" cy="-4" r="2.5" fill="#333"/>
              <!-- Âò¥Â∑¥ -->
              <path d="M -4 6 Q 0 10 4 6" stroke="#333" stroke-width="2" fill="none"/>
            </g>
            
            <!-- ËÄÅÂ©Ü -->
            <g class="wife" transform="translate(200, 180)">
              <!-- Â§¥ÈÉ® -->
              <circle cx="0" cy="0" r="13" fill="url(#wifeGradient)"/>
              <!-- Â§¥Âèë -->
              <path d="M -12 -13 Q 0 -22 12 -13" fill="url(#wifeGradient)"/>
              <!-- Ë∫´‰Ωì -->
              <rect x="-10" y="13" width="20" height="28" fill="url(#wifeGradient)" rx="10"/>
              <!-- ÊâãËáÇ -->
              <rect x="10" y="16" width="6" height="20" fill="url(#wifeGradient)" rx="3" transform="rotate(15, 10, 16)"/>
              <!-- ËÖø -->
              <rect x="-6" y="41" width="5" height="16" fill="url(#wifeGradient)" rx="2.5"/>
              <rect x="1" y="41" width="5" height="16" fill="url(#wifeGradient)" rx="2.5"/>
              <!-- ÁúºÁùõ -->
              <circle cx="-4" cy="-2" r="1.8" fill="#333"/>
              <circle cx="4" cy="-2" r="1.8" fill="#333"/>
              <!-- Âò¥Â∑¥ -->
              <path d="M -2 4 Q 0 6 2 4" stroke="#333" stroke-width="1.2" fill="none"/>
            </g>
            
            <!-- ÈÅõÁãóÁª≥ -->
            <path class="leash" d="M 200 175 Q 250 145 300 180" stroke="#8B4513" stroke-width="4" fill="none" stroke-linecap="round" stroke-dasharray="5,5"/>
            
            <!-- ÂèØÁà±Â∞èÁãó -->
            <g class="dog" transform="translate(300, 180)" @click="petDog" style="cursor: pointer;">
              <!-- Ë∫´‰Ωì -->
              <ellipse cx="0" cy="0" rx="25" ry="15" fill="url(#dogGradient)"/>
              <!-- Â§¥ÈÉ® -->
              <circle cx="20" cy="-10" r="18" fill="url(#dogGradient)"/>
              <!-- ËÄ≥Êúµ -->
              <ellipse cx="15" cy="-25" rx="6" ry="12" fill="#8B4513" transform="rotate(-20, 15, -25)"/>
              <ellipse cx="25" cy="-25" rx="6" ry="12" fill="#8B4513" transform="rotate(20, 25, -25)"/>
              <!-- ÁúºÁùõ -->
              <circle cx="23" cy="-12" r="3" fill="#333"/>
              <circle cx="17" cy="-12" r="3" fill="#333"/>
              <circle cx="23" cy="-12" r="1" fill="#fff"/>
              <circle cx="17" cy="-12" r="1" fill="#fff"/>
              <!-- ÈºªÂ≠ê -->
              <circle cx="30" cy="-6" r="2" fill="#000"/>
              <!-- Âò¥Â∑¥ -->
              <path d="M 30 -4 Q 28 -1 26 -4" stroke="#000" stroke-width="2" fill="none"/>
              <!-- ËàåÂ§¥ -->
              <ellipse cx="28" cy="-1" rx="3" ry="2" fill="#FF69B4"/>
              <!-- Â∞æÂ∑¥ -->
              <path class="tail" d="M -25 0 Q -40 -15 -30 -5" stroke="#8B4513" stroke-width="6" fill="none" stroke-linecap="round"/>
              <!-- ËÖø -->
              <rect x="-20" y="12" width="5" height="12" fill="url(#dogGradient)" rx="2.5"/>
              <rect x="-10" y="12" width="5" height="12" fill="url(#dogGradient)" rx="2.5"/>
              <rect x="10" y="12" width="5" height="12" fill="url(#dogGradient)" rx="2.5"/>
              <rect x="15" y="12" width="5" height="12" fill="url(#dogGradient)" rx="2.5"/>
              <!-- Áà™Â≠ê -->
              <circle cx="-20" cy="24" r="2" fill="#8B4513"/>
              <circle cx="-10" cy="24" r="2" fill="#8B4513"/>
              <circle cx="10" cy="24" r="2" fill="#8B4513"/>
              <circle cx="20" cy="24" r="2" fill="#8B4513"/>
            </g>
            
            <!-- Ë£ÖÈ•∞ÂÖÉÁ¥† -->
            <g class="decorations">
              <!-- Â∞èÈ™®Â§¥ -->
              <g class="bone" transform="translate(350, 220)">
                <rect x="-8" y="-2" width="16" height="4" fill="#F4A460" rx="2"/>
                <rect x="-2" y="-8" width="4" height="16" fill="#F4A460" rx="2"/>
              </g>
              <!-- Â∞èËä±Êúµ -->
              <g class="flower" transform="translate(80, 220)">
                <circle cx="0" cy="0" r="4" fill="#FF69B4"/>
                <circle cx="0" cy="0" r="3" fill="#FF1493"/>
                <circle cx="0" cy="0" r="2" fill="#FF1493"/>
              </g>
              <!-- Â∞èËù¥Ëù∂ -->
              <g class="butterfly" transform="translate(420, 100)">
                <path d="M 0 0 Q -5 -5 -10 0 Q -5 5 0 0" fill="#FFB6C1"/>
                <path d="M 0 0 Q 5 -5 10 0 Q 5 5 0 0" fill="#FFB6C1"/>
              </g>
            </g>
            
            <!-- ‰∫§‰∫íÊèêÁ§∫ -->
            <g class="interaction-hint" transform="translate(300, 120)" @click="petDog" style="cursor: pointer;">
              <circle cx="0" cy="0" r="8" fill="#FFD700" opacity="0.8"/>
              <text x="0" y="3" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">ÁÇπÂáªÊàë</text>
            </g>
          </svg>
        </div>
        
        <!-- Â∞èÁãóÁä∂ÊÄÅÊ∂àÊÅØ -->
        <div v-if="dogState !== 'normal'" class="dog-message" :class="dogState">
          <span v-if="dogState === 'happy'">üêï Ê±™Ê±™ÔºÅÂ•ΩÂºÄÂøÉË¢´‰Ω†ÊäöÊë∏ÔΩû</span>
          <span v-else-if="dogState === 'excited'">üêï Ê±™Ê±™Ê±™ÔºÅË∂ÖÁ∫ßÂÖ¥Â•ãÔºÅÁªßÁª≠ÊäöÊë∏ÊàëÂêßÔºÅ</span>
        </div>
        
        <h1 class="title">‰∫≤Áà±ÁöÑËÄÅÂ©Ü‰ªî üíï</h1>
        <p class="subtitle">ËÆ©Êàë‰ª¨‰∏ÄËµ∑Ëµ∞Âá∫emoÂõ∞Â¢ÉÂêß</p>
        <div class="start-btn" @click="startQuiz">
          ÂºÄÂßãÂêß ‚ú®
        </div>
      </div>

      <!-- ÈóÆÈ¢òÂå∫Âüü -->
      <div class="question-container" v-else-if="currentStep <= 2 || currentStep === 'work' || currentStep === 'study' || currentStep === 'life' || currentStep === 'work-salary' || currentStep === 'work-workload' || currentStep === 'work-change-job' || currentStep === 'study-seek-help' || currentStep === 'study-lower-goal' || currentStep === 'life-more-time' || currentStep === 'life-more-income'">
        <div class="question-card">
          <div class="question-number">Á¨¨ {{ getQuestionNumber() }} È¢ò</div>
          <div v-if="currentFlowTitle" class="flow-title">{{ currentFlowTitle }}</div>
          <h2 class="question-text">{{ currentQuestion.question }}</h2>
          
          <div class="options">
            <button 
              v-for="(option, index) in currentQuestion.options" 
              :key="index"
              class="option-btn"
              :class="{ 'selected': selectedOption === index }"
              @click="selectOption(index)"
            >
              {{ option.text }}
            </button>
          </div>

          <div class="navigation">
            <button 
              v-if="canGoBack()" 
              class="nav-btn prev-btn"
              @click="prevQuestion"
            >
              ‚Üê ‰∏ä‰∏ÄÈ¢ò
            </button>
          </div>
        </div>
      </div>

      <!-- Ê∏©È¶®Âä®ÁîªÂå∫Âüü -->
      <div class="happy-container" v-else-if="currentStep === 'happy'">
        <div class="happy-card">
          <h2 class="happy-title">üéâ Â§™Ê£íÂï¶ÔºÅ</h2>
          <p class="happy-text">ËÄÅÂ©Ü‰ªîÂøÉÊÉÖ‰∏çÈîôÂë¢ÔΩû</p>
          <div class="happy-emoji">üòä</div>
          <p class="happy-message">ÁªßÁª≠‰øùÊåÅËøô‰ªΩÂ•ΩÂøÉÊÉÖÂêßÔºÅ</p>
          
          <div class="action-buttons">
            <button class="action-btn primary" @click="restartQuiz">
              ÈáçÊñ∞ÂºÄÂßã üîÑ
            </button>
            <button class="action-btn secondary" @click="goHome">
              ÂõûÂà∞È¶ñÈ°µ üè†
            </button>
          </div>
        </div>
      </div>

      <!-- ÁªìÊûúÂå∫Âüü -->
      <div class="result-container" v-else>
        <div class="result-card">
          <h2 class="result-title">üí° ÁêÜÊô∫ÂàÜÊûêÁªìÊûú</h2>
          <div class="result-content">
            <p class="result-text">{{ getResultText() }}</p>
          </div>
          
          <div class="action-buttons">
            <button class="action-btn primary" @click="restartQuiz">
              ÈáçÊñ∞ÂºÄÂßã üîÑ
            </button>
            <button class="action-btn secondary" @click="goHome">
              ÂõûÂà∞È¶ñÈ°µ üè†
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'App',
  data() {
    return {
      currentStep: 0,
      selectedOption: null,
      answers: [],
      dogState: 'normal', // Â∞èÁãóÁä∂ÊÄÅÔºönormal, happy, excited
      dogClickCount: 0, // ÁÇπÂáªÊ¨°Êï∞
      
      // üéØ ÊâÄÊúâÈ¢òÁõÆÈÖçÁΩÆ - Âú®ËøôÈáå‰øÆÊîπÈ¢òÁõÆÂÜÖÂÆπ
      quizConfig: {
        // ‰∏ªÊµÅÁ®ãÈ¢òÁõÆ
        mainQuestions: [
          {
            id: 1,
            question: "ÊòØ‰∏çÊòØÊúÄËøëemoÂï¶Ôºüüòî",
            options: [
              { 
                text: "ÊòØ üò¢", 
                value: "yes",
                nextAction: "continue"
              },
              { 
                text: "Âê¶ üòä", 
                value: "no",
                nextAction: "happy"
              }
            ]
          },
          {
            id: 2,
            question: "‰∏∫Âï•emo‰∫ÜÂëÄÔºü",
            options: [
              { 
                text: "Â∑•‰ΩúÂéãÂäõÂ§ß üíº", 
                value: "work",
                nextAction: "subflow",
                subflowType: "work"
              },
              { 
                text: "Â≠¶‰π†ÂéãÂäõÂ§ß üìö", 
                value: "study",
                nextAction: "subflow",
                subflowType: "study"
              },
              { 
                text: "ÁîüÊ¥ªÂéãÂäõÂ§ß üè†", 
                value: "life",
                nextAction: "subflow",
                subflowType: "life"
              }
            ]
          }
        ],
        
        // Â∑•‰ΩúÂéãÂäõÂ≠êÊµÅÁ®ã
        workFlow: {
          title: "Â∑•‰ΩúÂéãÂäõËß£ÂÜ≥ÊñπÊ°à üíº",
          questions: [
            {
              id: 3,
              question: "Èù¢ÂØπÂ∑•‰ΩúÂéãÂäõÔºå‰Ω†ÊúÄÂ∏åÊúõÂèëÁîü‰ªÄ‰πàÔºü",
              options: [
                { 
                  text: "Ê∂®Â∑•ËµÑÔºåËÆ©‰ªòÂá∫ÊúâÂõûÊä• üí∞", 
                  value: "salary",
                  nextAction: "subflow",
                  subflowType: "work-salary"
                },
                { 
                  text: "Â∞ëÂπ≤ÁÇπÊ¥ªÔºåÂ§ö‰ºëÊÅØ ‚è∞", 
                  value: "workload",
                  nextAction: "subflow",
                  subflowType: "work-workload"
                },
                { 
                  text: "Êç¢‰∏Ä‰ªΩÊõ¥ËΩªÊùæÁöÑÂ∑•‰Ωú üîÑ", 
                  value: "change-job",
                  nextAction: "subflow",
                  subflowType: "work-change-job"
                }
              ]
            }
          ]
        },
        
        // Ê∂®Â∑•ËµÑÂ≠êÊµÅÁ®ã
        workSalaryFlow: {
          title: "Ê∂®Â∑•ËµÑÊîªÁï• üí∞",
          questions: [
            {
              id: 4,
              question: "‰∏∫‰∫ÜÊ∂®Â∑•ËµÑÔºå‰Ω†ÊÑøÊÑè‰ªòÂá∫‰ªÄ‰πàÂä™ÂäõÔºü",
              options: [
              { 
                  text: "ÂßîÂ©âÁöÑÁî≥ËØ∑Âä†Ëñ™ üí∞", 
                  value: "ask-for-raise",
                  nextAction: "result",
                  resultMessage: "ÂßîÂ©âÁöÑÊèêÂá∫Ôºå‰Ω†Áé∞Âú®Â∑•‰ΩúÈáèÂ§ßÔºå‰ΩÜÊòØÂ∑•ËµÑ‰ΩéÔºåË¶ÅÊ±ÇÊ∂®Ëñ™„ÄÇ"
                },
                { 
                  text: "ÊèêÂçáÊäÄËÉΩÔºåËÄÉÂèñËØÅ‰π¶ üìö", 
                  value: "improve-skills",
                  nextAction: "result",
                  resultMessage: "ËΩØËÄÉÈ´òÁ∫ß‰∏ÄËøáÔºåÁõ¥Êé•Â∞±ÊòØ‰∏ìÂÆ∂„ÄÇËÆ∞‰ΩèÔºåÊäïËµÑËá™Â∑±Ê∞∏Ëøú‰∏ç‰ºö‰∫èÊú¨ÔºÅ"
                },
                { 
                  text: "‰∏ªÂä®ÊâøÊãÖÊõ¥Â§öË¥£‰ªª üí™", 
                  value: "take-responsibility",
                  nextAction: "result",
                  resultMessage: "ÊâøÊãÖÊõ¥Â§öË¥£‰ªªÊòØÊ∂®Â∑•ËµÑÁöÑÂâçÊèêÊù°‰ª∂„ÄÇÂΩìÁÑ∂ÔºåÈªëÂøÉËµÑÊú¨ÂÆ∂Ê≤°ËâØÂøÉÔºå‰º∞ËÆ°‰∏ªÂä®Áªô‰Ω†Ê∂®Ëñ™‰ºöÂæàÈöæÔºÅ"
                },
                { 
                  text: "ÂØªÊâæË∑≥ÊßΩÊú∫‰ºöÔºåË¥ßÊØî‰∏âÂÆ∂ üîç", 
                  value: "job-hunting",
                  nextAction: "result",
                  resultMessage: "ÂÖàÈù¢ËØïÊãøÂà∞offerÔºåÁÑ∂ÂêéÁ°¨Ê∞îÁÇπË¶ÅÊ±ÇÊ∂®Ëñ™Ôºå‰∏çÊ∂®Ëñ™Áõ¥Êé•Ë∑≥ÊßΩÔºåË∑≥ÊßΩÊâçÊòØÊ∂®Ëñ™ÁöÑÊúÄÂø´Ë∑ØÂæÑ„ÄÇËÆ∞‰ΩèÔºå‰Ω†ÂÄºÂæóÊõ¥Â•ΩÁöÑÂæÖÈÅáÔºÅ"
                }
              ]
            }
          ]
        },
        
        // ÂáèÂ∞ëÂ∑•‰ΩúÈáèÂ≠êÊµÅÁ®ã
        workWorkloadFlow: {
          title: "ÂáèÂ∞ëÂ∑•‰ΩúÈáèÊîªÁï• ‚è∞",
          questions: [
            {
              id: 4,
              question: "Â¶Ç‰ΩïÂáèÂ∞ëÂ∑•‰ΩúÈáèÔºü",
              options: [
                { 
                  text: "ÊèêÈ´òÂ∑•‰ΩúÊïàÁéáÔºåÁî®Â∑•ÂÖ∑Ëá™Âä®Âåñ üöÄ", 
                  value: "improve-efficiency",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÊèêÈ´òÊïàÁéáÂæàËÅ™ÊòéÔºÅÁî®Êõ¥Â∞ëÁöÑÊó∂Èó¥ÂÆåÊàêÊõ¥Â§öÂ∑•‰ΩúÔºåËøôÊ†∑Êó¢ËÉΩÂáèÂ∞ëÂéãÂäõÔºåÂèàËÉΩ‰øùÊåÅ‰∫ßÂá∫„ÄÇ"
                },
                { 
                  text: "Â≠¶‰ºöÊãíÁªùÔºå‰∏çÊé•Ë∂ÖÂá∫ËÉΩÂäõÁöÑÂ∑•‰Ωú üö´", 
                  value: "learn-to-say-no",
                  nextAction: "result",
                  resultMessage: "Âπ≤‰∏ç‰∫Ü‰∏ÄÁÇπÔºÅ‰∏çÊòØÊâÄÊúâÂ∑•‰ΩúÈÉΩË¶ÅÊé•Ôºå‰øùÊä§Ëá™Â∑±ÁöÑÊó∂Èó¥ÂíåÁ≤æÂäõÂæàÈáçË¶Å„ÄÇ"
                },
                { 
                  text: "ÂíåÈ¢ÜÂØºÊ≤üÈÄöÔºåÈáçÊñ∞ÂàÜÈÖç‰ªªÂä° ü§ù", 
                  value: "renegotiate-tasks",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÂíåÈ¢ÜÂØºÊ≤üÈÄöÂæàÊòéÊô∫ÔºÅ‰∏çË¶ÅÊãÖÂøÉÈ¢ÜÂØº‰ºöÊÄé‰πàÊÉ≥‰Ω†Ôºå‰Ω†Âè™ÊòØÂêàÁêÜË°®Ëææ‰Ω†ÁöÑËØâÊ±Ç„ÄÇ"
                }
              ]
            }
          ]
        },
        
        // Êç¢Â∑•‰ΩúÂ≠êÊµÅÁ®ã
        workChangeJobFlow: {
          title: "Êç¢Â∑•‰ΩúÊîªÁï• üîÑ",
          questions: [
            {
              id: 4,
              question: "Êç¢Â∑•‰ΩúÂâçÔºå‰Ω†‰ºöÂÅö‰ªÄ‰πàÂáÜÂ§áÔºü",
              options: [
                { 
                  text: "Êõ¥Êñ∞ÁÆÄÂéÜÔºåÊèêÂçáÊäÄËÉΩ üìù", 
                  value: "update-resume",
                  nextAction: "result",
                  resultMessage: "ÊúâÁ©∫Âà∑‰∏Ä‰∏ãBossÁõ¥ËÅòÔºåÁúãÁúãÁé∞Âú®ÁöÑÂ≤ó‰Ωç‰ªÄ‰πàËñ™ËµÑ‰ªÄ‰πàË¶ÅÊ±ÇÔºåÂÖà‰ªéÁÆÄÂéÜ‰øÆÊîπÂºÄÂßãÂêßÔΩû"
                },
                { 
                  text: "ÂÖàÊâæÂ•Ω‰∏ãÂÆ∂ÔºåÂÜçËæûËÅå üéØ", 
                  value: "find-next-job",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÂÖàÊâæÂ•Ω‰∏ãÂÆ∂ÂæàÁ®≥Â¶•ÔºÅËøôÊ†∑Êó¢ËÉΩ‰øùËØÅÊî∂ÂÖ•Ôºå‰πüËÉΩÊúâÊõ¥Â§öÈÄâÊã©ÁöÑÁ©∫Èó¥„ÄÇ"
                },
                { 
                  text: "Ë£∏ËæûÔºåÁªôËá™Â∑±‰∏Ä‰∏™ÂÅáÊúü üèñÔ∏è", 
                  value: "quit-directly",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©Ë£∏ËæûÂæàÊúâÈ≠ÑÂäõÔºÅÊúâÊó∂ÂÄôÈúÄË¶ÅÁªôËá™Â∑±‰∏Ä‰∏™ÈáçÊñ∞ÂºÄÂßãÁöÑÊú∫‰ºöÔºåÊîæÂøÉÔºåÊúâËÄÅÂÖ¨‰ªîÂÖª‰Ω†ÂëÄ„ÄÇ"
                }
              ]
            }
          ]
        },
        
        // Â≠¶‰π†ÂéãÂäõÂ≠êÊµÅÁ®ã
        studyFlow: {
          title: "Â≠¶‰π†ÂéãÂäõËß£ÂÜ≥ÊñπÊ°à üìö",
          questions: [
            {
              id: 3,
              question: "Èù¢ÂØπÂ≠¶‰π†ÂéãÂäõÔºå‰Ω†ÊúÄÂ∏åÊúõÂèëÁîü‰ªÄ‰πàÊîπÂèòÔºü",
              options: [
                { 
                  text: "Call‰∫∫ÂïäÔºÅÂØªÊ±ÇÂØºÂ∏àÂ∏ÆÂä©ÔºåËé∑Âæó‰∏ì‰∏öÊåáÂØº üë®‚Äçüè´", 
                  value: "seek-help",
                  nextAction: "subflow",
                  subflowType: "study-seek-help"
                },
                { 
                  text: "Ë∫∫Âπ≥ÂêßÔºÅÈÄÇÂΩìÈôç‰ΩéÁõÆÊ†áÔºåÂáèËΩªÂøÉÁêÜË¥üÊãÖ üéØ", 
                  value: "lower-goal",
                  nextAction: "subflow",
                  subflowType: "study-lower-goal"
                }
              ]
            }
          ]
        },
        
        // ÂØªÊ±ÇÂ∏ÆÂä©Â≠êÊµÅÁ®ã
        studySeekHelpFlow: {
          title: "ÂØªÊ±ÇÂ∏ÆÂä©ÊîªÁï• üë®‚Äçüè´",
          questions: [
            {
              id: 4,
              question: "Â¶Ç‰ΩïÊõ¥Â•ΩÂú∞ÂØªÊ±ÇÂ∏ÆÂä©Ôºü",
              options: [
                { 
                  text: "‰∏ªÂä®È¢ÑÁ∫¶ÂØºÂ∏àÔºåÂáÜÂ§áÂÖ∑‰ΩìÈóÆÈ¢ò üìù", 
                  value: "prepare-questions",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÂáÜÂ§áÂÖ∑‰ΩìÈóÆÈ¢òÂæà‰∏ì‰∏öÔºÅËøôÊ†∑ÂØºÂ∏àËÉΩÊõ¥Â•ΩÂú∞Â∏ÆÂä©‰Ω†ÔºåÊïàÁéá‰ºöÊõ¥È´ò„ÄÇËÆ∞‰ΩèÔºåÂ•ΩÁöÑÈóÆÈ¢òÊØîÂ•ΩÁöÑÁ≠îÊ°àÊõ¥ÈáçË¶ÅÔºÅ"
                },
                { 
                  text: "ÊâæÂêåÂ≠¶ÁªÑÈòüÂ≠¶‰π†Ôºå‰∫íÁõ∏Áù£‰øÉ ü§ù", 
                  value: "study-group",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÁªÑÈòüÂ≠¶‰π†ÂæàÊ£íÔºÅÂõ¢ÈòüÂêà‰ΩúËÉΩÊøÄÂèëÁÅµÊÑüÔºå‰∫íÁõ∏Áù£‰øÉ‰πüËÉΩÊèêÈ´òÂ≠¶‰π†ÊïàÁéá„ÄÇ"
                },
                { 
                  text: "Â§ßÂñä‰∏ÄÂ£∞ÔºåËÄÅÂÖ¨‰ªîÊïëÂëΩÂïäÔºÅÔºÅ üíó", 
                  value: "collective-wisdom",
                  nextAction: "result",
                  resultMessage: "ËÄÅÂÖ¨‰ªî‰ºöÁöÑ == ËÄÅÂ©Ü‰ªî‰ºöÁöÑÔºÅÔºÅ"
                }
              ]
            }
          ]
        },
        
        // Èôç‰ΩéÁõÆÊ†áÂ≠êÊµÅÁ®ã
        studyLowerGoalFlow: {
          title: "Ë∞ÉÊï¥ÁõÆÊ†áÊîªÁï• üéØ",
          questions: [
            {
              id: 4,
              question: "Â¶Ç‰ΩïÁßëÂ≠¶Âú∞Ë∞ÉÊï¥Â≠¶‰π†ÁõÆÊ†áÔºü",
              options: [
                { 
                  text: "ÈáçÊñ∞ËØÑ‰º∞‰ºòÂÖàÁ∫ßÔºå‰∏ìÊ≥®ÊúÄÈáçË¶ÅÁöÑ üìä", 
                  value: "reprioritize",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÈáçÊñ∞ËØÑ‰º∞‰ºòÂÖàÁ∫ßÂæàÊòéÊô∫ÔºÅ‰∏çÊòØÊâÄÊúâÁõÆÊ†áÈÉΩÂêåÁ≠âÈáçË¶ÅÔºå‰∏ìÊ≥®Ê†∏ÂøÉÂÜÖÂÆπËÉΩËÆ©‰Ω†Â≠¶ÂæóÊõ¥ÊâéÂÆû„ÄÇ"
                },
                { 
                  text: "ËÆæÂÆöÈò∂ÊÆµÊÄßÁõÆÊ†áÔºåÂæ™Â∫èÊ∏êËøõ üöÄ", 
                  value: "step-by-step",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©Âæ™Â∫èÊ∏êËøõÂæàÊ£íÔºÅÂ§ßÁõÆÊ†áÂàÜËß£ÊàêÂ∞èÁõÆÊ†áÔºåÊØèÂÆåÊàê‰∏Ä‰∏™ÈÉΩ‰ºöÁªô‰Ω†ÊàêÂ∞±ÊÑüÔºåÂéãÂäõ‰πü‰ºöÊÖ¢ÊÖ¢ÂáèËΩª„ÄÇ"
                },
                { 
                  text: "ÁªôËá™Â∑±Êõ¥Â§öÊó∂Èó¥Ôºå‰∏çË¶ÅÊÄ•‰∫éÊ±ÇÊàê ‚è∞", 
                  value: "more-time",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ÁªôËá™Â∑±Êõ¥Â§öÊó∂Èó¥ÂæàÊòéÊô∫ÔºÅÂ≠¶‰π†ÊòØ‰∏Ä‰∏™ËøáÁ®ãÔºå‰∏çË¶ÅÂõ†‰∏∫‰∏ÄÊó∂ÁöÑÂéãÂäõËÄåÊîæÂºÉ„ÄÇÊÖ¢‰∏ÄÁÇπÊ≤°ÂÖ≥Á≥ªÔºåÈáçË¶ÅÁöÑÊòØÂùöÊåÅ„ÄÇ"
                }
              ]
            }
          ]
        },
        
        // ÁîüÊ¥ªÂéãÂäõÂ≠êÊµÅÁ®ã
        lifeFlow: {
          title: "ÁîüÊ¥ªÂéãÂäõËß£ÂÜ≥ÊñπÊ°à üè†",
          questions: [
            {
              id: 3,
              question: "Èù¢ÂØπÁîüÊ¥ªÂéãÂäõÔºå‰Ω†ÊúÄÂ∏åÊúõÂèëÁîü‰ªÄ‰πàÊîπÂèòÔºü",
              options: [
                { 
                  text: "ÂéªtmdÂ∑•‰ΩúÂ≠¶‰π†ÔºåËÄÅÂ®òË¶ÅËØ∑ÂÅáÂéªÁúãÁúã‰∏ñÁïå üïê", 
                  value: "more-time",
                  nextAction: "subflow",
                  subflowType: "life-more-time"
                },
                { 
                  text: "ÂΩìÂç∑ÁéãÔºåÊé•È°πÁõÆÔºåÊå£Â∞èÈí±Èí± üí∞", 
                  value: "more-income",
                  nextAction: "subflow",
                  subflowType: "life-more-income"
                }
              ]
            }
          ]
        },
        
        // Êõ¥Â§öÊó∂Èó¥Â≠êÊµÅÁ®ã
        lifeMoreTimeFlow: {
          title: "Áúã‰∏ñÁïåÊîªÁï• üåç",
          questions: [
            {
              id: 4,
              question: "‰∏∫‰∫ÜÂÆûÁé∞Áúã‰∏ñÁïåÁöÑÊ¢¶ÊÉ≥Ôºå‰Ω†ÊÑøÊÑèÊÄé‰πàÂÅöÔºü",
              options: [
                { 
                  text: "Âà∂ÂÆöÊóÖË°åËÆ°ÂàíÔºåËÆæÂÆöÂÖ∑‰ΩìÁõÆÊ†á üó∫Ô∏è", 
                  value: "travel-plan",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©Âà∂ÂÆöÊóÖË°åËÆ°ÂàíÂæàÊ£íÔºÅÊúâÁõÆÊ†áÊâçÊúâÂä®ÂäõÔºåÂÖà‰ªéÂ∞èÂú∞ÊñπÂºÄÂßãÔºåÊÖ¢ÊÖ¢ÂÆûÁé∞Áúã‰∏ñÁïåÁöÑÊ¢¶ÊÉ≥„ÄÇËÆ∞‰ΩèÔºåÊØè‰∏™‰ºüÂ§ßÁöÑÊóÖÁ®ãÈÉΩÂßã‰∫éÁ¨¨‰∏ÄÊ≠•ÔºÅ"
                },
                { 
                  text: "Â≠¶‰ºöÊó∂Èó¥ÁÆ°ÁêÜÔºå‰∏∫ÊóÖË°åÊîíÂÅáÊúü ‚è∞", 
                  value: "time-management",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©Êó∂Èó¥ÁÆ°ÁêÜÂæàÊòéÊô∫ÔºÅÂêàÁêÜÂÆâÊéíÂ∑•‰ΩúÔºåÈ´òÊïàÂÆåÊàê‰ªªÂä°Ôºå‰Ω†Â∞±ËÉΩÊúâÊõ¥Â§öÂÅáÊúüÂéªÁúã‰∏ñÁïå„ÄÇÊó∂Èó¥Â∞±ÊòØÈáëÈí±ÔºåÊõ¥ÊòØËá™Áî±ÔºÅ"
                },
                { 
                  text: "ÂØªÊâæËøúÁ®ãÂ∑•‰ΩúÊú∫‰ºöÔºåËæπÂ∑•‰ΩúËæπÊóÖË°å üíª", 
                  value: "remote-work",
                  nextAction: "result",
                  resultMessage: "ÈÄâÊã©ËøúÁ®ãÂ∑•‰ΩúÂæàÊúâËøúËßÅÔºÅÁßëÊäÄËÆ©‰∏ñÁïåÂèòÂ∞èÔºå‰Ω†ÂèØ‰ª•Âú®‰ªª‰ΩïÂú∞ÊñπÂ∑•‰ΩúÔºåÂêåÊó∂‰ΩìÈ™å‰∏çÂêåÁöÑÊñáÂåñÂíåÈ£éÊôØ„ÄÇËøôÊâçÊòØÁúüÊ≠£ÁöÑËá™Áî±ÔºÅ"
                }
              ]
            }
          ]
        },
        
        // Â¢ûÂä†Êî∂ÂÖ•Â≠êÊµÅÁ®ã
        lifeMoreIncomeFlow: {
          title: "Â¢ûÂä†Êî∂ÂÖ•ÊîªÁï• üí∞",
          questions: [
            {
              id: 4,
              question: "Â¶Ç‰ΩïÂÆâÂÖ®Âú∞Â¢ûÂä†Êî∂ÂÖ•Ôºü",
              options: [
                { 
                  text: "ÂØªÊâæÂâØ‰∏öÊú∫‰ºöÔºåÂ§öÂÖÉÂåñÊî∂ÂÖ• üíº", 
                  value: "side-business",
                  nextAction: "result",
                  resultMessage: "‰∏çÊòØÂêßÔºü‰∏çÊòØÂêßÔºü‰Ω†ËøòÁúüÁöÑ‰∏çÂ§üÁ¥ØÔºåËøòË¶ÅÂÜçÊé•È°πÁõÆÔºü"
                },
                { 
                  text: "ÁêÜË¥¢ÊäïËµÑÔºåËÆ©Èí±ÁîüÈí± üìà", 
                  value: "investment",
                  nextAction: "result",
                  resultMessage: "ÁÆó‰∫ÜÂêßÔºåÂí±‰ª¨Ê≤°ÊúâËøô‰∏™Â§©ËµãÔºåËøò‰∏çÂ¶ÇÈì∂Ë°åÂ≠òÂÆöÊúüÔΩûÔΩû"
                }
              ]
            }
          ]
        }
      }
    }
  },
  
  computed: {
    currentQuestion() {
      if (this.currentStep <= this.quizConfig.mainQuestions.length) {
        return this.quizConfig.mainQuestions[this.currentStep - 1]
      } else if (this.currentStep === "work") {
        const workStep = this.answers.length - this.quizConfig.mainQuestions.length
        return this.quizConfig.workFlow.questions[workStep]
      } else if (this.currentStep === "study") {
        const studyStep = this.answers.length - this.quizConfig.mainQuestions.length
        return this.quizConfig.studyFlow.questions[studyStep]
      } else if (this.currentStep === "life") {
        const lifeStep = this.answers.length - this.quizConfig.mainQuestions.length
        return this.quizConfig.lifeFlow.questions[lifeStep]
      } else if (this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job") {
        // Â∑•‰ΩúÂéãÂäõÂ≠êÊµÅÁ®ã
        let flowKey
        if (this.currentStep === "work-salary") {
          flowKey = "workSalaryFlow"
        } else if (this.currentStep === "work-workload") {
          flowKey = "workWorkloadFlow"
        } else if (this.currentStep === "work-change-job") {
          flowKey = "workChangeJobFlow"
        }
        const flowQuestions = this.quizConfig[flowKey].questions
        const flowStep = this.answers.length - this.quizConfig.mainQuestions.length - 1 // ÂáèÂéªÂ∑•‰ΩúÊµÅÁ®ãÁöÑÁ¨¨‰∏ÄÈ¢ò
        return flowQuestions[flowStep]
      } else if (this.currentStep === "study-seek-help" || this.currentStep === "study-lower-goal") {
        // Â≠¶‰π†ÂéãÂäõÂ≠êÊµÅÁ®ã
        let flowKey
        if (this.currentStep === "study-seek-help") {
          flowKey = "studySeekHelpFlow"
        } else if (this.currentStep === "study-lower-goal") {
          flowKey = "studyLowerGoalFlow"
        }
        const flowQuestions = this.quizConfig[flowKey].questions
        const flowStep = this.answers.length - this.quizConfig.mainQuestions.length - 1 // ÂáèÂéªÂ≠¶‰π†ÊµÅÁ®ãÁöÑÁ¨¨‰∏ÄÈ¢ò
        return flowQuestions[flowStep]
      } else if (this.currentStep === "life-more-time" || this.currentStep === "life-more-income") {
        // ÁîüÊ¥ªÂéãÂäõÂ≠êÊµÅÁ®ã
        let flowKey
        if (this.currentStep === "life-more-time") {
          flowKey = "lifeMoreTimeFlow"
        } else if (this.currentStep === "life-more-income") {
          flowKey = "lifeMoreIncomeFlow"
        }
        const flowQuestions = this.quizConfig[flowKey].questions
        const flowStep = this.answers.length - this.quizConfig.mainQuestions.length - 1 // ÂáèÂéªÁîüÊ¥ªÊµÅÁ®ãÁöÑÁ¨¨‰∏ÄÈ¢ò
        return flowQuestions[flowStep]
      }
      return null
    },
    
    currentFlowTitle() {
      if (this.currentStep === "work") return this.quizConfig.workFlow.title
      if (this.currentStep === "study") return this.quizConfig.studyFlow.title
      if (this.currentStep === "life") return this.quizConfig.lifeFlow.title
      if (this.currentStep === "work-salary") return this.quizConfig.workSalaryFlow.title
      if (this.currentStep === "work-workload") return this.quizConfig.workWorkloadFlow.title
      if (this.currentStep === "work-change-job") return this.quizConfig.workChangeJobFlow.title
      if (this.currentStep === "study-seek-help") return this.quizConfig.studySeekHelpFlow.title
      if (this.currentStep === "study-lower-goal") return this.quizConfig.studyLowerGoalFlow.title
      if (this.currentStep === "life-more-time") return this.quizConfig.lifeMoreTimeFlow.title
      if (this.currentStep === "life-more-income") return this.quizConfig.lifeMoreIncomeFlow.title
      return ""
    }
  },
  
  methods: {
    startQuiz() {
      this.currentStep = 1
      this.answers = []
      this.selectedOption = null
    },
    
    selectOption(index) {
      this.selectedOption = index
      // Ëá™Âä®ËøõÂÖ•‰∏ã‰∏ÄÈ¢ò
      this.$nextTick(() => {
        this.nextQuestion()
      })
    },
    
    nextQuestion() {
      console.log('nextQuestion called, currentStep:', this.currentStep, 'selectedOption:', this.selectedOption)
      
      if (this.selectedOption !== null) {
        const selectedOption = this.currentQuestion.options[this.selectedOption]
        console.log('selectedOption:', selectedOption)
        
        this.answers.push({
          question: this.currentQuestion.question,
          answer: selectedOption
        })
        
        console.log('nextAction:', selectedOption.nextAction, 'subflowType:', selectedOption.subflowType)
        
        // Ê†πÊçÆÈÄâÈ°πÁöÑnextActionÂÜ≥ÂÆö‰∏ã‰∏ÄÊ≠•
        if (selectedOption.nextAction === "happy") {
          console.log('Setting currentStep to happy')
          this.currentStep = "happy"
        } else if (selectedOption.nextAction === "subflow") {
          console.log('Setting currentStep to subflow:', selectedOption.subflowType)
          this.currentStep = selectedOption.subflowType
        } else if (selectedOption.nextAction === "result") {
          console.log('Setting currentStep to result')
          this.currentStep = "result"
        } else if (selectedOption.nextAction === "continue") {
          // ÁªßÁª≠ÂΩìÂâçÊµÅÁ®ã
          if (this.currentStep <= this.quizConfig.mainQuestions.length) {
            // ‰∏ªÊµÅÁ®ã
            if (this.currentStep < this.quizConfig.mainQuestions.length) {
              this.currentStep++
            }
          } else if (this.currentStep === "work") {
            // Â∑•‰ΩúÊµÅÁ®ãÔºàÁ¨¨3È¢òÔºâ
            // ËøôÈáå‰∏çÈúÄË¶ÅÁªßÁª≠ÔºåÂõ†‰∏∫Á¨¨3È¢òÂ∑≤ÁªèÈÄâÊã©‰∫ÜÂ≠êÊµÅÁ®ã
          } else if (this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job") {
            // Â∑•‰ΩúÂéãÂäõÂ≠êÊµÅÁ®ã
            let flowKey
            if (this.currentStep === "work-salary") {
              flowKey = "workSalaryFlow"
            } else if (this.currentStep === "work-workload") {
              flowKey = "workWorkloadFlow"
            } else if (this.currentStep === "work-change-job") {
              flowKey = "workChangeJobFlow"
            }
            const currentFlowQuestions = this.quizConfig[flowKey].questions
            const currentFlowStep = this.answers.length - this.quizConfig.mainQuestions.length - 1 // ÂáèÂéªÂ∑•‰ΩúÊµÅÁ®ãÁöÑÁ¨¨‰∏ÄÈ¢ò
            
            if (currentFlowStep < currentFlowQuestions.length) {
              // ËøòÊúâÊõ¥Â§öÈóÆÈ¢òÔºåÁªßÁª≠
            } else {
              // Â≠êÊµÅÁ®ãÂÆåÊàêÔºåÊòæÁ§∫ÁªìÊûú
              this.currentStep = "result"
            }
          } else {
            // ÂÖ∂‰ªñÂ≠êÊµÅÁ®ã
            const currentFlow = this.currentStep
            const currentFlowQuestions = this.quizConfig[`${currentFlow}Flow`].questions
            const currentFlowStep = this.answers.length - this.quizConfig.mainQuestions.length
            
            if (currentFlowStep < currentFlowQuestions.length) {
              // ËøòÊúâÊõ¥Â§öÈóÆÈ¢òÔºåÁªßÁª≠
            } else {
              // Â≠êÊµÅÁ®ãÂÆåÊàêÔºåÊòæÁ§∫ÁªìÊûú
              this.currentStep = "result"
            }
          }
        }
        
        this.selectedOption = null
      }
    },
    
    prevQuestion() {
      console.log('prevQuestion called, currentStep:', this.currentStep, 'answers length:', this.answers.length)
      
      // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•ËøîÂõûÔºàÂåÖÊã¨Â≠êÊµÅÁ®ãÔºâ
      if (this.currentStep > 1 || this.currentStep === "work" || this.currentStep === "study" || this.currentStep === "life" || this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job" || this.currentStep === "study-seek-help" || this.currentStep === "study-lower-goal" || this.currentStep === "life-more-time" || this.currentStep === "life-more-income" || this.currentStep === "result") {
        // Â¶ÇÊûúÂú®Â≠êÊµÅÁ®ã‰∏≠ÔºåÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜ
        if (this.currentStep === "work" || this.currentStep === "study" || this.currentStep === "life") {
          const currentFlow = this.currentStep
          const currentFlowQuestions = this.quizConfig[`${currentFlow}Flow`].questions
          const currentFlowStep = this.answers.length - this.quizConfig.mainQuestions.length
          
          console.log('In subflow:', currentFlow, 'step:', currentFlowStep)
          
          if (currentFlowStep > 0) {
            // ËøòÂú®Â≠êÊµÅÁ®ã‰∏≠ÔºåËøîÂõû‰∏ä‰∏ÄÈ¢ò
            console.log('Going back in subflow')
            this.answers.pop()
            this.selectedOption = null
          } else {
            // ÂõûÂà∞‰∏ªÊµÅÁ®ãÁ¨¨‰∫åÈ¢ò
            console.log('Going back to main flow')
            this.currentStep = 2
            this.answers.pop()
            this.selectedOption = null
          }
        } else if (this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job") {
          // ‰ªéÂ∑•‰ΩúÂéãÂäõÂ≠êÊµÅÁ®ãËøîÂõû
          console.log('Going back from work subflow')
          this.currentStep = "work"
          this.answers.pop()
          this.selectedOption = null
        } else if (this.currentStep === "study-seek-help" || this.currentStep === "study-lower-goal") {
          // ‰ªéÂ≠¶‰π†ÂéãÂäõÂ≠êÊµÅÁ®ãËøîÂõû
          console.log('Going back from study subflow')
          this.currentStep = "study"
          this.answers.pop()
          this.selectedOption = null
        } else if (this.currentStep === "life-more-time" || this.currentStep === "life-more-income") {
          // ‰ªéÁîüÊ¥ªÂéãÂäõÂ≠êÊµÅÁ®ãËøîÂõû
          console.log('Going back from life subflow')
          this.currentStep = "life"
          this.answers.pop()
          this.selectedOption = null
        } else if (this.currentStep === "result") {
          // ‰ªéÁªìÊûúÈ°µËøîÂõûÔºåÈúÄË¶ÅÂõûÂà∞ÂØπÂ∫îÁöÑÂ≠êÊµÅÁ®ã
          console.log('Going back from result page')
          const lastAnswer = this.answers[this.answers.length - 1]
          if (lastAnswer && lastAnswer.answer.value) {
            // Ê†πÊçÆÊúÄÂêé‰∏Ä‰∏™Á≠îÊ°àÂà§Êñ≠ÊòØÂì™‰∏™ÊµÅÁ®ã
            if (["improve-skills", "take-responsibility", "job-hunting"].includes(lastAnswer.answer.value)) {
              this.currentStep = "work-salary"
            } else if (["improve-efficiency", "learn-to-say-no", "renegotiate-tasks"].includes(lastAnswer.answer.value)) {
              this.currentStep = "work-workload"
            } else if (["update-resume", "find-next-job", "quit-directly"].includes(lastAnswer.answer.value)) {
              this.currentStep = "work-change-job"
            } else if (["persist", "balance", "collaborate", "enjoy"].includes(lastAnswer.answer.value)) {
              this.currentStep = "study"
            } else if (["suffer", "seek-support", "make-plan", "reward"].includes(lastAnswer.answer.value)) {
              this.currentStep = "life"
            }
          }
          this.answers.pop()
          this.selectedOption = null
        } else {
          // ‰∏ªÊµÅÁ®ã‰∏≠ÁöÑËøîÂõû
          console.log('Going back in main flow')
          this.currentStep--
          this.answers.pop()
          this.selectedOption = null
        }
      } else {
        console.log('Cannot go back, currentStep <= 1')
      }
    },
    
    getQuestionNumber() {
      if (this.currentStep <= this.quizConfig.mainQuestions.length) {
        return this.currentStep
      } else if (this.currentStep === "work" || this.currentStep === "study" || this.currentStep === "life") {
        return this.quizConfig.mainQuestions.length + this.answers.length - this.quizConfig.mainQuestions.length + 1
      } else if (this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job") {
        // Â∑•‰ΩúÂéãÂäõÂ≠êÊµÅÁ®ã
        return this.quizConfig.mainQuestions.length + 2 // Á¨¨3È¢ò + Á¨¨4È¢ò
      } else if (this.currentStep === "study-seek-help" || this.currentStep === "study-lower-goal") {
        // Â≠¶‰π†ÂéãÂäõÂ≠êÊµÅÁ®ã
        return this.quizConfig.mainQuestions.length + 2 // Á¨¨3È¢ò + Á¨¨4È¢ò
      } else if (this.currentStep === "life-more-time" || this.currentStep === "life-more-income") {
        // ÁîüÊ¥ªÂéãÂäõÂ≠êÊµÅÁ®ã
        return this.quizConfig.mainQuestions.length + 2 // Á¨¨3È¢ò + Á¨¨4È¢ò
      }
      return 1
    },
    
    canGoBack() {
      if (this.currentStep <= 1) return false
      if (this.currentStep === "work" || this.currentStep === "study" || this.currentStep === "life" || this.currentStep === "work-salary" || this.currentStep === "work-workload" || this.currentStep === "work-change-job" || this.currentStep === "study-seek-help" || this.currentStep === "study-lower-goal" || this.currentStep === "life-more-time" || this.currentStep === "life-more-income") {
        // Âú®Â≠êÊµÅÁ®ã‰∏≠ÔºåÊÄªÊòØÂèØ‰ª•ËøîÂõûÔºàÂõ†‰∏∫Ëá≥Â∞ëÂ∑≤ÁªèÈÄâÊã©‰∫ÜÂéãÂäõÊ∫êÔºâ
        return true
      }
      if (this.currentStep === "result") {
        // Âú®ÁªìÊûúÈ°µÔºåÊÄªÊòØÂèØ‰ª•ËøîÂõû
        return true
      }
      return true
    },
    
    getResultText() {
      const lastAnswer = this.answers[this.answers.length - 1]
      
      if (lastAnswer && lastAnswer.answer.resultMessage) {
        return lastAnswer.answer.resultMessage
      }
      
      return "‰∫≤Áà±ÁöÑËÄÅÂ©Ü‰ªîÔºåÊó†ËÆ∫‰Ω†ÈÄâÊã©‰ªÄ‰πàÔºåÈÉΩË¶ÅËÆ∞‰ΩèÔºö‰Ω†ÂÄºÂæóË¢´Â∞äÈáçÔºå‰Ω†ÁöÑ‰ªòÂá∫Â∫îËØ•ÂæóÂà∞ÂõûÊä•„ÄÇ‰∏çË¶ÅÂÆ≥ÊÄïÊîπÂèòÔºåÂãáÊï¢Âú∞‰∏∫Ëá™Â∑±‰∫âÂèñÊõ¥Â•ΩÁöÑÁîüÊ¥ªÔºÅüí™üíï"
    },
    
    restartQuiz() {
      this.currentStep = 1
      this.answers = []
      this.selectedOption = null
    },
    
    goHome() {
      this.currentStep = 0
      this.answers = []
      this.selectedOption = null
    },
    
    petDog() {
      this.dogClickCount++
      
      if (this.dogClickCount === 1) {
        this.dogState = 'happy'
        // ÊòæÁ§∫ÂºÄÂøÉÊ∂àÊÅØ
        setTimeout(() => {
          this.dogState = 'normal'
        }, 2000)
      } else if (this.dogClickCount === 3) {
        this.dogState = 'excited'
        // ÊòæÁ§∫ÂÖ¥Â•ãÊ∂àÊÅØ
        setTimeout(() => {
          this.dogState = 'normal'
        }, 3000)
      } else if (this.dogClickCount >= 5) {
        this.dogState = 'excited'
        // ÊòæÁ§∫Ë∂ÖÁ∫ßÂÖ¥Â•ãÊ∂àÊÅØ
        setTimeout(() => {
          this.dogState = 'normal'
        }, 4000)
      }
      
      // ÈáçÁΩÆÁÇπÂáªÊ¨°Êï∞ÔºàÊØè10Ê¨°ÈáçÁΩÆÔºâ
      if (this.dogClickCount >= 10) {
        this.dogClickCount = 0
      }
    }
  }
}
</script>

<style scoped>
.app {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.container {
  width: 100%;
  max-width: 600px;
  text-align: center;
}

.header {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 40px 30px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
}

.title {
  font-size: 2.5rem;
  color: #4a5568;
  margin-bottom: 15px;
  font-weight: 700;
}

.subtitle {
  font-size: 1.2rem;
  color: #718096;
  margin-bottom: 30px;
}

.start-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 15px 40px;
  border-radius: 50px;
  font-size: 1.2rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-block;
}

.start-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
}

.question-container {
  width: 100%;
}

.question-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 40px 30px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
}

.question-number {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 20px;
}

.flow-title {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
  padding: 8px 20px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 15px;
}

.question-text {
  font-size: 1.5rem;
  color: #2d3748;
  margin-bottom: 30px;
  line-height: 1.4;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 30px;
}

.option-btn {
  background: #f7fafc;
  border: 2px solid #e2e8f0;
  padding: 20px;
  border-radius: 15px;
  font-size: 1.1rem;
  color: #4a5568;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.option-btn:hover {
  border-color: #667eea;
  background: #edf2f7;
  transform: translateY(-2px);
}

.option-btn.selected {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-color: #667eea;
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
}

.navigation {
  display: flex;
  justify-content: center;
}

.nav-btn {
  padding: 12px 25px;
  border: none;
  border-radius: 25px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.prev-btn {
  background: #e2e8f0;
  color: #4a5568;
}

.prev-btn:hover {
  background: #cbd5e0;
}

.happy-container, .result-container {
  width: 100%;
}

.happy-card, .result-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 40px 30px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
  text-align: center;
}

.happy-title, .result-title {
  font-size: 2rem;
  color: #2d3748;
  margin-bottom: 25px;
}

.happy-text, .happy-message {
  font-size: 1.2rem;
  color: #4a5568;
  margin-bottom: 15px;
}

.happy-emoji {
  font-size: 4rem;
  margin: 20px 0;
}

.result-text {
  font-size: 1.2rem;
  color: #4a5568;
  line-height: 1.6;
  text-align: left;
  margin-bottom: 30px;
}

.action-buttons {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.action-btn {
  padding: 15px 30px;
  border: none;
  border-radius: 25px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.action-btn.primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.action-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
}

.action-btn.secondary {
  background: #e2e8f0;
  color: #4a5568;
}

.action-btn.secondary:hover {
  background: #cbd5e0;
}

@media (max-width: 768px) {
  .app {
    padding: 15px;
  }
  
  .title {
    font-size: 2rem;
  }
  
  .question-text {
    font-size: 1.3rem;
  }
  
  .option-btn {
    padding: 18px;
    font-size: 1rem;
  }
  
  .action-btn {
    width: 100%;
  }
  
  .dog-walking-animation {
    margin-bottom: 20px;
  }
  
  .dog-svg {
    width: 280px;
    height: 140px;
  }
}

/* Â∞èÁãóÈÅõÁãóÂä®ÁîªÊ†∑Âºè */
.dog-walking-animation {
  margin-bottom: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.dog-svg {
  width: 500px;
  height: 300px;
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.15));
  border-radius: 20px;
  overflow: hidden;
}

/* ‰∫ëÊúµÂä®Áîª */
.clouds ellipse {
  animation: float 3s ease-in-out infinite;
}

.clouds ellipse:nth-child(1) {
  animation-delay: 0s;
}

.clouds ellipse:nth-child(2) {
  animation-delay: 1s;
}

.clouds ellipse:nth-child(3) {
  animation-delay: 2s;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-5px);
  }
}

/* ËÄÅÂÖ¨Âä®Áîª */
.husband {
  animation: husbandWalk 2s ease-in-out infinite;
}

@keyframes husbandWalk {
  0%, 100% {
    transform: translate(150px, 180px) translateY(0px);
  }
  50% {
    transform: translate(150px, 180px) translateY(-3px);
  }
}

/* ËÄÅÂ©ÜÂä®Áîª */
.wife {
  animation: wifeWalk 2.2s ease-in-out infinite;
}

@keyframes wifeWalk {
  0%, 100% {
    transform: translate(200px, 180px) translateY(0px);
  }
  50% {
    transform: translate(200px, 180px) translateY(-2px);
  }
}

/* ÈÅõÁãóÁª≥Âä®Áîª */
.leash {
  animation: leashWave 1.5s ease-in-out infinite;
  transform-origin: 200px 180px;
}

@keyframes leashWave {
  0%, 100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(2deg);
  }
}

/* Â∞èÁãóÂä®Áîª */
.dog {
  animation: dogWalk 2.5s ease-in-out infinite;
  transition: all 0.3s ease;
}

.dog:hover {
  transform: scale(1.05);
}

@keyframes dogWalk {
  0%, 100% {
    transform: translate(300px, 180px) translateY(0px) rotate(0deg);
  }
  25% {
    transform: translate(300px, 180px) translateY(-2px) rotate(1deg);
  }
  50% {
    transform: translate(300px, 180px) translateY(0px) rotate(0deg);
  }
  75% {
    transform: translate(300px, 180px) translateY(-2px) rotate(-1deg);
  }
}

/* Â∞èÁãóÂ∞æÂ∑¥Âä®Áîª */
.tail {
  animation: tailWag 1s ease-in-out infinite;
  transform-origin: -25px 0px;
}

@keyframes tailWag {
  0%, 100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(20deg);
  }
}

/* Â∞èÁãóËÄ≥ÊúµÂä®Áîª */
.dog ellipse {
  animation: earWiggle 2s ease-in-out infinite;
}

.dog ellipse:nth-child(2) {
  animation-delay: 0.5s;
}

@keyframes earWiggle {
  0%, 100% {
    transform: rotate(-20deg, 15, -25) scale(1);
  }
  50% {
    transform: rotate(-20deg, 15, -25) scale(1.1);
  }
}

.dog ellipse:nth-child(3) {
  animation-delay: 0.5s;
}

@keyframes earWiggle2 {
  0%, 100% {
    transform: rotate(20deg, 25, -25) scale(1);
  }
  50% {
    transform: rotate(20deg, 25, -25) scale(1.1);
  }
}

/* Ë£ÖÈ•∞ÂÖÉÁ¥†Âä®Áîª */
.decorations rect {
  animation: bounce 2s ease-in-out infinite;
}

.decorations g {
  animation: rotate 4s linear infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-3px);
  }
}

@keyframes rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Â∞èÁãóÁúºÁùõÈó™ÁÉÅÂä®Áîª */
.dog circle:nth-child(4),
.dog circle:nth-child(5) {
  animation: blink 3s ease-in-out infinite;
}

@keyframes blink {
  0%, 90%, 100% {
    opacity: 1;
  }
  95% {
    opacity: 0.3;
  }
}

/* Â∞èÁãóÁä∂ÊÄÅÁõ∏ÂÖ≥Âä®Áîª */
.dog.happy .tail {
  animation: tailWag 0.5s ease-in-out infinite;
}

.dog.excited .tail {
  animation: tailWag 0.3s ease-in-out infinite;
}

.dog.happy ellipse {
  animation: earWiggle 1s ease-in-out infinite;
}

.dog.excited ellipse {
  animation: earWiggle 0.5s ease-in-out infinite;
}

/* Êï¥‰ΩìÂëºÂê∏ÊïàÊûú */
.dog-walking-animation {
  animation: breathe 4s ease-in-out infinite;
}

@keyframes breathe {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

/* Â∞èÁãóÁä∂ÊÄÅÊ∂àÊÅØÊ†∑Âºè */
.dog-message {
  background: linear-gradient(135deg, #FFD700, #FFA500);
  color: #333;
  padding: 12px 24px;
  border-radius: 25px;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 20px;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
  animation: messagePop 0.5s ease-out;
  display: inline-block;
}

.dog-message.happy {
  background: linear-gradient(135deg, #90EE90, #32CD32);
  color: #fff;
  box-shadow: 0 4px 12px rgba(144, 238, 144, 0.3);
}

.dog-message.excited {
  background: linear-gradient(135deg, #FF69B4, #FF1493);
  color: #fff;
  box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
  animation: messagePop 0.3s ease-out;
}

@keyframes messagePop {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ‰∫§‰∫íÊèêÁ§∫Ê†∑Âºè */
.interaction-hint {
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.1);
    opacity: 1;
  }
}

/* Ëù¥Ëù∂Âä®Áîª */
.butterfly {
  animation: butterflyFly 4s ease-in-out infinite;
}

@keyframes butterflyFly {
  0%, 100% {
    transform: translate(420px, 100px) rotate(0deg);
  }
  25% {
    transform: translate(420px, 100px) rotate(15deg) translateY(-5px);
  }
  50% {
    transform: translate(420px, 100px) rotate(0deg) translateY(0px);
  }
  75% {
    transform: translate(420px, 100px) rotate(-15deg) translateY(-5px);
  }
}
</style>
